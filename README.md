<div align=center>
	<img src="https://capsule-render.vercel.app/api?type=rect&color=auto&height=130&section=header&text=Only-Five-Server&fontSize=80&fontAlignY=53" />
</div>
<div align=center>
	<h3>ðŸ“š Tech Stack ðŸ“š</h3>
	<p>âœ¨ Platforms & Languages âœ¨</p>
</div>
<div align="center">
    <img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=flat&logo=JavaScript&logoColor=white" />
    <img src="https://img.shields.io/badge/Expresss-000000?style=flat&logo=express&logoColor=white" />
    <img src="https://img.shields.io/badge/Oracle-F80000?style=flat&logo=Oracle&logoColor=white" />
    <br/>    
    <br/>
</div>

# ajou-only-five
Only-Five í”„ë¡œì íŠ¸ ì¤‘ ì„œë²„ í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

## í”„ë¡œì íŠ¸ êµ¬ì¡°
```sh
src
â”œâ”€â”€ controllers # API ìš”ì²­ ë° ì‘ë‹µë¥¼ RESTfulí•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì„ ë‹´ë‹¹í•©ë‹ˆë‹¤. 
â”œâ”€â”€ db # DB ì—°ê²°ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
â”œâ”€â”€ env # env íŒŒì¼ì˜ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
â”œâ”€â”€ query # DB ì¿¼ë¦¬ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.
â”œâ”€â”€ routers # API ìš”ì²­ì„ ê° Controllerì— ë§žê²Œ ê²½ë¡œë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.
â”œâ”€â”€ services # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
â”œâ”€â”€ types # ë°ì´í„° íƒ€ìž…ì„ JDocsë¡œ ë§¤í•‘í•©ë‹ˆë‹¤.
â””â”€â”€ utils # ìœ í‹¸ì„± í•¨ìˆ˜ë¥¼ ëª¨ì•„ë†“ìŠµë‹ˆë‹¤.
```

## í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥

1. To-do ê´€ë¦¬

+ To-doë¥¼ ë“±ë¡, ìˆ˜ì •, ì‚­ì œí•  ìˆ˜ ìžˆì–´ìš”
+ To-do ê³µê°œ ë²”ìœ„ë¥¼ ì„ íƒí•  ìˆ˜ ìžˆì–´ìš”

2. ì¹œêµ¬ ê¸°ëŠ¥
+ ì¹œêµ¬ë¥¼ ì¶”ê°€, ì‚­ì œí•  ìˆ˜ ìžˆì–´ìš”
+ ì‚¬ìš©ìžë¥¼ ê²€ìƒ‰í•  ìˆ˜ ìžˆì–´ìš”

3. ì›”ë³„ To-do ëž­í‚¹ ì°¨íŠ¸
+ ìµœëŒ€ 5ëª…ê¹Œì§€ ì›”ë³„ë¡œ To-do ëª©ë¡ ì™„ë£Œ ê°œìˆ˜ë¥¼ ê°€ìž¥ ë§Žì€ ìˆœìœ¼ë¡œ ë³´ì—¬ì¤˜ìš”

## ëª©í‘œ
1. í”„ë¡œì íŠ¸ ì£¼ìš” ê¸°ëŠ¥ì„ êµ¬í˜„í•´ìš”
2. ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ ê°œë°œí•´ìš”. í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ SDKê°€ ì•„ë‹Œ ì´ìƒ ì§ì ‘ êµ¬í˜„í•´ìš”.

### íƒ€ìž… ì•ˆì •ì„±
JSëŠ” ì»´íŒŒì¼ ì‹œì ì— íƒ€ìž… ì²´í¬ë¥¼ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, ë‹¤ìŒ ë‘ ê°€ì§€ë¥¼ í™œìš©í•´ ìµœëŒ€í•œ íƒ€ìž…ì„ ì²´í¬í•˜ê³  ì—ëŸ¬ë¥¼ í•¸ë“¤ë§í•´ìš”

1. JDocsë¥¼ í™œìš©í•´ í•¨ìˆ˜ ë³„ë¡œ íŒŒë¼ë¯¸í„° íƒ€ìž…, ë¦¬í„´ íƒ€ìž…, Exception íƒ€ìž… ë“±ì´ ë¬´ì—‡ì¸ì§€ ëª…í™•ížˆ ê´€ë¦¬í•´ìš”
2. TypeCheckUtilë¥¼ í™œìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì—ì„œ íƒ€ìž…ì„ ë¨¼ì € ì²´í¬í•œ ë’¤ ë¡œì§ì„ ìž‘ì„±í•´ìš”

ì•„ëž˜ëŠ” ì˜ˆì‹œì—ìš”

```js
/**
     * @namedparam
     * @param { Object } data
     * @property { Number } userId - data.userId, ìœ ì € id
     * @property { Number } followerId - data.followerId, íŒ”ë¡œì›Œ id
     * 
     * @return { Object } 
     * @property { Boolean } status
     * @property { Number } friendId
     * 
     * @description
     * ```js
     * // ì¹œêµ¬ ìƒì„±ì´ ì •ìƒì ìœ¼ë¡œ ì™„ë£Œë˜ê³ , í•´ë‹¹ ì •ë³´ê°€ DBì— ì €ìž¥ ëì„ ê²½ìš°
     * { 
     *  status : true, 
     *  data: {
     *          friendId: 0
     *      }
     * } 
     * 
     * // parameter íƒ€ìž…ì´ ë§žì§€ ì•Šì„ ê²½ìš°
     * // ì¹œêµ¬ ìƒì„±ì´ ì™„ë£Œë˜ì§€ ì•Šì•˜ì„ ê²½ìš°
     * // í•´ë‹¹ ì •ë³´ê°€ DBì— ì €ìž¥ë˜ì§€ ì•Šì•˜ì„ ê²½ìš°
     * { status : false }
     * ```
     */
    createFollow: async ({ userId, followerId }) => {
        const typeCheckData = [
            [userId, followerId],
            ['number', 'number'],
        ];

        const typeCheckResult = TypeChecker.typeCheckAll({ objectList: typeCheckData[0], typeList: typeCheckData[1] });

        if (typeCheckResult) {
            return false;
        }

        const bind = [
            followerId,
            userId,
            {
                dir: oracledb.BIND_OUT,
                type: oracledb.NUMBER
            },
            {
                dir: oracledb.BIND_OUT,
                type: oracledb.NUMBER
            },
            {
                dir: oracledb.BIND_OUT,
                type: oracledb.NUMBER
            },
            {
                dir: oracledb.BIND_OUT,
                type: oracledb.NUMBER
            }
        ]

        const option = {
            autoCommit: true
        };

        try {
            const result = await oracleDbHelper.connection.execute(FollowQuery.createFollow, bind, option);
            console.log(result);
            return { status: true};
        } catch (e) {
            console.log(e);
            return { status: false };
        }
    },
```

### CORS
Expressì— ë“±ë¡í•  ë¯¸ë“¤ì›¨ì–´ ì¤‘ CORSë¥¼ ì§ì ‘ êµ¬í˜„í•´ìš”. ë‹¤ìŒê³¼ ê°™ì€ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ìš”.

1. allowedOriginsë¥¼ ë“±ë¡í•´ìš”
2. í—ˆìš©í•  header keyë¥¼ ë“±ë¡í•´ìš”
3. í—ˆìš©í•  RESTful API methodë¥¼ ë“±ë¡í•´ìš”
4. HTTP í†µì‹ ê°„ ìžê²© ì¦ëª…ì„ í™œì„±í™”í•  ê²ƒì¸ì§€ ì—¬ë¶€ë¥¼ ë“±ë¡í•´ìš”

CORSëŠ” ë“±ë¡ ì´í›„ ë‚´ìš©ì´ ë³€ê²½ë˜ë©´ ì•ˆ ë˜ê¸° ë•Œë¬¸ì—, JavaScriptì˜ Scopeì™€ Closure ê°œë…ì„ í™œìš©í•˜ì—¬ private ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆì–´ìš”

```js
const myCors = ({ allowedOrigins, headers, methods, credentials }) => {
    let _allowedOrigins = null;
    let _headers = null;
    let _methods = null;
    let _credentials = null


    if (allowedOrigins === undefined) {
        allowedOrigins = [];
    }

    if (!Array.isArray(allowedOrigins)) {
        throw (new Error('allowedOrigins must be Array<string>'));
    }

    for (const origin of allowedOrigins) {
        if (!TypeChecker.isString(origin)) {
            throw (new Error('origin must be string'));
        }
    }

    if (headers === undefined) {
        headers = '';
    }

    if (!TypeChecker.isString(headers)) {
        throw (new Error('headers must be String'));
    }

    if (methods === undefined) {
        methods = '';
    }

    if (!TypeChecker.isString(methods)) {
        throw (new Error('methods must be String'));
    }

    if (credentials) {
        _credentials = true;
    } else {
        _credentials = false;
    }

    if (headers.length !== 0) {
        _headers = headers;
    }
    if (methods.length !== 0) {
        _methods = methods;
    }
    if (allowedOrigins.length !== 0) {
        _allowedOrigins = [...allowedOrigins];
    }

    const setHeader = (req, res, next) => {
        if (req.headers === undefined) {
            throw (new Error('The first parameter must be request.'));
        }

        if (res.status === undefined) {
            throw (new Error('The second parameter must be response.'));
        }

        if (req.headers.origin !== undefined) {
            let num = 0;

            for (const allowedOrigin of _allowedOrigins) {
                if (allowedOrigin.includes(req.headers.origin)) {
                    break;
                }
            }

            if (num === _allowedOrigins.length) {
                return res.status(400).send(`Not accepted origin ${req.headers.origin}`);
            }

            res.setHeader('Access-Control-Allow-Origin', req.headers.origin);
        }

        if (_headers !== null) {
            res.header('Access-Control-Allow-Headers', _headers);

        }
        if (_methods !== null) {
            res.header('Access-Control-Allow-Methods', _methods);
        }
        if (_credentials) {
            res.header('Access-Control-Allow-Credentials', true);
        } else {
            res.header('Access-Control-Allow-Credentials', false);
        }

        if (req.method === "OPTIONS") {
            return res.status(200).send("OK");
        }

        next();
    }

    return setHeader;
};

```